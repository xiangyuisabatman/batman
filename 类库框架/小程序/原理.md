## 双线程模型

采用双线程模型，小程序的渲染层和逻辑层分别由两个线程管理：

1. 渲染层的界面使用 WebView 进行渲染；
2. 逻辑层采用 JSCore 运行 JavaScript 代码。
3. 这两层都通过 Native 层进行中转。

## 为什么要这么设计

为了管控和安全，微信小程序阻止开发使用一些浏览器提供的，诸如跳转页面、操作 DOM、动态执行脚本的开放接口。将逻辑层与视图层进行分离，视图层和逻辑层之间只有数据的通信。可以防止开发者随意操作界面，更好的保证了用户的数据安全。

| 运行环境         | 逻辑层 | 渲染层            |
| ---------------- | ------ | ----------------- |
| Android          | V8     | Chromium 定制内核 |
| iOS              | JSCore | WKWebView         |
| 小程序开发者工具 | NWJS   | Chrome WebView    |

## 静态编译和运行时渲染

- 静态编译：将 JSX 转换为小程序  的模版语言，再辅以轻量级的运行时 JS 代码，抹平小程序生命周期和框架的生命周期的差异。
