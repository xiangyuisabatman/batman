### 同源策略（协议+域名+端口）三者相同。

### 有三个标签是允许跨域加载资源
- `<img src=XXX>`
- `<link href=XXX>`
- `<script src=XXX>`

### 同时满足两个条件的简单请求
- 请求方式GET,HEAD,POST
- 请求头：无自定义请求头、Accept、Accept-Language、Content-Language、Last-Event-ID、Content-Type（只有三个值application/x-www-form-urlencoded、multipart/form-data、text/plain）

### 非简单请求
- PUT、DELETE
- 有自定义请求头
- 发送json格式数据
- OPTIONS预检请求

### 跨域方法
1. jsonp
2. cors
3. postMessage
    - 页面和其打开的新窗口的数据传递
    - 多窗口之间消息传递
    - 页面与嵌套的iframe消息传递
    - 上面三个场景的跨域数据传递
    `otherWindow.postMessage(message, targetOrigin,[transfer])`
4. websocket
5. Node中间件代理
6. nginx反向代理
7. window.name+iframe
8. location.hash+iframe
9. document.domain+iframe


### 服务端解决跨域请求
```
app.use(async (ctx, next) => {
    ctx.set('Access-Control-Allow-Origin', '*');
    ctx.set('Access-Control-Allow-Headers', 'Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild');
    ctx.set('Access-Control-Allow-Methods', 'PUT, POST, GET, DELETE, OPTIONS');
    if (ctx.method == 'OPTIONS') {
        ctx.body = 200;
    } else {
        await next();
    }
})
```